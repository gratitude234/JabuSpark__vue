            </div>

            <p v-else class="text-[11px] text-muted">
              No drills yet. Start a quick drill to see your activity here.
            </p>
          </div>
        </div>
      </section>

      <!-- QUICK ACTIONS -->
      <section class="mt-4 space-y-2">
        <div class="flex items-center justify-between text-xs">
          <h2 class="text-sm font-semibold text-slate-900">
            Quick actions
          </h2>
          <p class="hidden sm:block text-[11px] text-muted">
            Jump straight into the most common actions.
          </p>
        </div>

        <div class="grid gap-2 sm:grid-cols-4 text-xs">
          <button class="quick-action" @click="startQuickDrill">
            <div class="quick-action-title">
              ‚ö° Quick drill
            </div>
            <span class="quick-action-sub">
              5‚Äì10 random questions from your active courses.
            </span>
          </button>

          <button class="quick-action" @click="goToLastDrill">
            <div class="quick-action-title">
              üìä Review last drill
            </div>
            <span class="quick-action-sub">
              See questions you missed and their answers.
            </span>
          </button>

          <button class="quick-action" @click="goToMaterials">
            <div class="quick-action-title">
              üìö Open materials
            </div>
            <span class="quick-action-sub">
              View PDFs and notes for your registered courses.
            </span>
          </button>

          <button class="quick-action" @click="goToCourses">
            <div class="quick-action-title">
              üß© Manage courses
            </div>
            <span class="quick-action-sub">
              Jump into course drills and materials.
            </span>
          </button>
        </div>
      </section>

      <!-- RECOMMENDED NEXT ACTION -->
      <div
        v-if="recommendedAction"
        class="mt-3 rounded-2xl border border-indigo-100 bg-indigo-50/60 px-4 py-3 shadow-sm flex flex-col sm:flex-row sm:items-center justify-between gap-3 text-xs"
      >
        <div class="flex items-start gap-3">
          <div
            class="mt-0.5 flex h-8 w-8 items-center justify-center rounded-full bg-white text-indigo-600 shadow-sm"
          >
            ‚öôÔ∏è
          </div>
          <div>
            <p class="text-[11px] font-semibold uppercase tracking-wide text-indigo-700">
              Recommended next step
            </p>
            <p class="mt-1 text-[12px] font-medium text-slate-900">
              {{ recommendedAction.title }}
            </p>
            <p class="mt-0.5 text-[11px] text-indigo-900/80">
              {{ recommendedAction.subtitle }}
            </p>
          </div>
        </div>

        <div class="flex flex-col items-end gap-1">
          <span
            v-if="recommendedAction.chip"
            :class="[
              'inline-flex items-center rounded-full px-2 py-0.5 text-[10px] font-semibold',
              recommendedAction.isLowScore
                ? 'bg-amber-100 text-amber-800'
                : 'bg-emerald-100 text-emerald-800'
            ]"
          >
            {{ recommendedAction.chip }}
          </span>

          <button
            class="mt-1 inline-flex items-center rounded-full bg-brand text-surface px-3 py-1.5 text-[11px] font-semibold shadow hover:bg-indigo-600 transition"
            @click="reviewDrill(recommendedAction.drillId)"
          >
            Review now
          </button>
        </div>
      </div>

      <!-- CONTINUE STUDYING CTA -->
      <div
        class="mt-4 rounded-2xl border border-slate-200 bg-white/80 px-4 py-3 shadow-sm flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3"
      >
        <div>
          <h2 class="text-sm font-semibold text-brand-dark">
            Continue studying
          </h2>
          <p class="text-xs text-muted mt-0.5">
            Jump into your courses to start a new drill or review materials.
          </p>
        </div>

        <button
          @click="goToCourses"
          class="inline-flex items-center rounded-full bg-brand text-surface text-xs sm:text-sm font-semibold px-4 py-2 shadow-md hover:bg-indigo-600 transition"
        >
          Go to My Courses
        </button>
      </div>

      <!-- FOCUS COURSES (WEAKEST AVERAGES) -->
      <div
        v-if="focusCourses.length"
        class="mt-4 border-t border-slate-200 pt-3"
      >
        <h3 class="text-sm font-semibold text-brand-dark">
          Focus courses
        </h3>
        <p class="text-xs text-muted mt-0.5">
          These courses have the lowest average drill scores from your recent activity.
        </p>

        <div class="mt-3 grid gap-3 sm:grid-cols-3 text-xs">
          <div
            v-for="course in focusCourses"
            :key="course.courseCode + course.courseTitle"
            class="rounded-2xl border border-amber-100 bg-amber-50/60 px-3 py-3 shadow-sm flex flex-col gap-2"
          >
            <div class="flex items-start justify-between gap-2">
              <div>
                <p class="text-[11px] font-semibold uppercase tracking-wide text-amber-700">
                  {{ course.courseCode || 'Course' }}
                </p>
                <p class="text-[12px] font-medium text-slate-900">
                  {{ course.courseTitle }}
                </p>
              </div>
              <span
                class="inline-flex items-center rounded-full bg-white/90 px-2 py-0.5 text-[10px] font-semibold text-amber-700 shadow-sm"
              >
                {{ course.avgScore }}% avg
              </span>
            </div>

            <p class="text-[11px] text-muted">
              {{ course.count }} drill{{ course.count > 1 ? 's' : '' }} taken
              <span v-if="course.lastDrillAt">
                ¬∑ Last:
                {{ formatDate(course.lastDrillAt.toISOString()) }}
              </span>
            </p>

            <!-- Visual bar -->
            <div class="mt-1">
              <div class="flex items-center justify-between text-[10px] text-muted mb-1">
                <span>Mastery</span>
                <span>{{ course.avgScore }}%</span>
              </div>
              <div class="h-1.5 rounded-full bg-white/70 overflow-hidden">
                <div
                  class="h-full rounded-full bg-amber-500 transition-all"
                  :style="{ width: Math.min(Math.max(course.avgScore || 0, 0), 100) + '%' }"
                ></div>
              </div>
            </div>

            <button
              class="mt-2 inline-flex items-center justify-center rounded-full bg-slate-900 text-surface px-3 py-1.5 text-[11px] font-semibold shadow hover:bg-slate-800 transition"
              @click="goToCourseFocus(course.courseCode)"
            >
              üîÅ Drill this course
            </button>
          </div>
        </div>
      </div>

      <!-- RECENT DRILLS + UPCOMING -->
      <div class="mt-4 grid gap-4 lg:grid-cols-3 border-t border-slate-200 pt-3">
        <!-- Recent drills -->
        <div class="lg:col-span-2">
          <h3 class="text-sm font-semibold text-brand-dark">
            Recent drills
          </h3>

          <div v-if="recentDrills.length" class="mt-2 space-y-2 text-xs">
            <div
              v-for="d in recentDrills"
              :key="d.id"
              class="group relative overflow-hidden rounded-xl border border-slate-200 bg-white/80 px-3 py-2.5 shadow-sm
                     hover:shadow-md hover:border-indigo-200 hover:bg-indigo-50/40
                     transition"
            >
              <div class="flex items-start gap-3">
                <!-- Left: icon / course code bubble -->
                <div
                  class="mt-0.5 flex h-8 w-8 items-center justify-center rounded-full bg-indigo-50 text-[11px] font-semibold text-indigo-700"
                >
                  {{ d.course_code ? d.course_code.slice(0, 3) : "DR" }}
                </div>

                <!-- Middle: main info -->
                <div class="flex-1 space-y-1">
                  <div class="flex items-center justify-between gap-2">
                    <div class="flex flex-wrap items-center gap-2">
                      <span
                        v-if="d.course_code"
                        class="inline-flex items-center rounded-full bg-indigo-50 px-2 py-0.5 text-[10px] font-semibold uppercase tracking-wide text-indigo-700"
                      >
                        {{ d.course_code }}
                      </span>
                      <span class="text-[12px] font-medium text-slate-900">
                        {{ d.course_title || "Drill session" }}
                      </span>
                    </div>

                    <!-- Status pill -->
                    <span
                      :class="[
                        'inline-flex items-center rounded-full px-2 py-0.5 text-[10px] font-semibold',
                        d.score >= 70
                          ? 'bg-emerald-50 text-emerald-700'
                          : 'bg-amber-50 text-amber-700'
                      ]"
                    >
                      {{ d.score >= 70 ? "On track" : "Needs revision" }}
                    </span>
                  </div>

                  <!-- Stats line -->
                  <p class="text-[11px] text-muted">
                    {{ d.num_correct }}/{{ d.num_questions }} correct ¬∑
                    {{ d.score }}% ¬∑
                    {{ formatDate(d.created_at) }}
                  </p>

                  <!-- Visual score bar -->
                  <div class="mt-1">
                    <div class="flex items-center justify-between text-[10px] text-muted mb-1">
                      <span>Score</span>
                      <span>{{ d.score }}%</span>
                    </div>
                    <div class="h-1.5 rounded-full bg-slate-100 overflow-hidden">
                      <div
                        class="h-full rounded-full transition-all"
                        :class="d.score >= 70 ? 'bg-emerald-500' : 'bg-amber-500'"
                        :style="{ width: Math.min(Math.max(d.score || 0, 0), 100) + '%' }"
                      ></div>
                    </div>
                  </div>
                </div>

                <!-- Right: action -->
                <div class="flex flex-col items-end gap-1">
                  <button
                    class="inline-flex items-center rounded-full border border-slate-200 bg-white/80 px-2.5 py-1 text-[11px] font-medium text-brand
                           hover:border-indigo-300 hover:bg-indigo-50 hover:text-indigo-700
                           transition"
                    @click="reviewDrill(d.id)"
                  >
                    Review
                  </button>
                </div>
              </div>
            </div>
          </div>

          <div
            v-else
            class="mt-2 rounded-2xl border border-dashed border-slate-200 bg-slate-50/60 px-4 py-3 text-xs flex flex-col sm:flex-row sm:items-center justify-between gap-3"
          >
            <div class="flex items-start gap-3">
              <div
                class="mt-0.5 flex h-8 w-8 items-center justify-center rounded-full bg-white text-slate-600 shadow-sm"
              >
                üß†
              </div>
              <div>
                <p class="text-[11px] font-semibold uppercase tracking-wide text-slate-700">
                  No drills yet
                </p>
                <p class="mt-1 text-[12px] font-medium text-slate-900">
                  Start a 5‚Äì10 question quick drill to unlock your first stats.
                </p>
                <p class="mt-0.5 text-[11px] text-muted">
                  Your recent drills, scores and progress will show up here as soon as you
                  complete a session.
                </p>
              </div>
            </div>

            <button
              class="inline-flex items-center rounded-full bg-brand text-surface px-3 py-1.5 text-[11px] font-semibold shadow hover:bg-indigo-600 transition"
              @click="startQuickDrill"
            >
              ‚ö° Start quick drill
            </button>
          </div>
        </div>

        <!-- Upcoming assessments -->
        <div>
          <h3 class="text-sm font-semibold text-brand-dark">
            Upcoming assessments
          </h3>
          <div class="mt-2 text-xs">
            <div
              v-if="!upcomingExams.length"
              class="rounded-2xl border border-dashed border-slate-200 bg-slate-50/60 px-4 py-3 flex items-start gap-3"
            >
              <div
                class="mt-0.5 flex h-8 w-8 items-center justify-center rounded-full bg-white text-slate-600 shadow-sm"
              >
                üìÖ
              </div>
              <div>
                <p class="text-[11px] font-semibold uppercase tracking-wide text-slate-700">
                  No assessments yet
                </p>
                <p class="mt-1 text-[12px] font-medium text-slate-900">
                  Exam and test dates will appear here once they‚Äôre added.
                </p>
                <p class="mt-0.5 text-[11px] text-muted">
                  Your department or course rep can add upcoming tests, quizzes and exams
                  so you can plan revision ahead of time.
                </p>
              </div>
            </div>

            <ul v-else class="space-y-2">
              <li
                v-for="exam in upcomingExams"
                :key="exam.id"
                class="flex items-start justify-between gap-2 rounded-md border border-slate-200 px-3 py-2"
              >
                <div>
                  <p class="text-[12px] font-semibold text-slate-900">
                    {{ exam.course_code }} ¬∑ {{ exam.title }}
                  </p>
                  <p class="text-[11px] text-muted">
                    {{ exam.date }} ¬∑ {{ exam.type }}
                  </p>
                </div>
                <span class="text-[11px] font-semibold text-indigo-600">
                  {{ exam.daysLeft }}d
                </span>
              </li>
            </ul>
          </div>
        </div>
      </div>

      <!-- ACTIVITY TIMELINE -->
      <div
        v-if="activityTimeline.length"
        class="mt-4 border-t border-slate-200 pt-3"
      >
        <h3 class="text-sm font-semibold text-brand-dark mb-2">
          Activity timeline
        </h3>

        <div class="space-y-3 text-xs">
          <div
            v-for="section in activityTimeline"
            :key="section.label"
            class="space-y-1.5"
          >
            <p class="text-[11px] font-semibold uppercase tracking-wide text-slate-500">
              {{ section.label }}
            </p>

            <div class="relative pl-4">
              <!-- Vertical line -->
              <div
                class="absolute left-[6px] top-0 bottom-0 w-px bg-slate-200"
              ></div>

              <div class="space-y-1.5">
                <div
                  v-for="item in section.items"
                  :key="item.id"
                  class="relative flex items-start gap-2"
                >
                  <!-- Dot -->
                  <div class="flex flex-col items-center">
